!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("phaser")):"function"==typeof define&&define.amd?define(["phaser"],n):"object"==typeof exports?exports.PhaserNavMeshPlugin=n(require("phaser")):t.PhaserNavMeshPlugin=n(t.Phaser)}(window,function(t){return function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){var i,r,o;!function(n){"object"==typeof t&&"object"==typeof t.exports?t.exports=n():(r=[],void 0===(o="function"==typeof(i=n)?i.apply(void 0,r):i)||(t.exports=o))}(function(){function t(t){for(var n=t,e=[];n.parent;)e.unshift(n),n=n.parent;return e}var n={search:function(e,i,o,a){e.cleanDirty();var s=(a=a||{}).heuristic||n.heuristics.manhattan,u=a.closest||!1,h=new r(function(t){return t.f}),l=i;for(i.h=s(i,o),e.markDirty(i),h.push(i);h.size()>0;){var c=h.pop();if(c===o)return t(c);c.closed=!0;for(var f=e.neighbors(c),y=0,v=f.length;y<v;++y){var p=f[y];if(!p.closed&&!p.isWall()){var d=c.g+p.getCost(c),g=p.visited;(!g||d<p.g)&&(p.visited=!0,p.parent=c,p.h=p.h||s(p,o),p.g=d,p.f=p.g+p.h,e.markDirty(p),u&&(p.h<l.h||p.h===l.h&&p.g<l.g)&&(l=p),g?h.rescoreElement(p):h.push(p))}}}return u?t(l):[]},heuristics:{manhattan:function(t,n){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},diagonal:function(t,n){var e=Math.sqrt(2),i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return 1*(i+r)+(e-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function e(t,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(var e=0;e<t.length;e++){this.grid[e]=[];for(var r=0,o=t[e];r<o.length;r++){var a=new i(e,r,o[r]);this.grid[e][r]=a,this.nodes.push(a)}}this.init()}function i(t,n,e){this.x=t,this.y=n,this.weight=e}function r(t){this.content=[],this.scoreFunction=t}return e.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)n.cleanNode(this.nodes[t])},e.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)n.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},e.prototype.markDirty=function(t){this.dirtyNodes.push(t)},e.prototype.neighbors=function(t){var n=[],e=t.x,i=t.y,r=this.grid;return r[e-1]&&r[e-1][i]&&n.push(r[e-1][i]),r[e+1]&&r[e+1][i]&&n.push(r[e+1][i]),r[e]&&r[e][i-1]&&n.push(r[e][i-1]),r[e]&&r[e][i+1]&&n.push(r[e][i+1]),this.diagonal&&(r[e-1]&&r[e-1][i-1]&&n.push(r[e-1][i-1]),r[e+1]&&r[e+1][i-1]&&n.push(r[e+1][i-1]),r[e-1]&&r[e-1][i+1]&&n.push(r[e-1][i+1]),r[e+1]&&r[e+1][i+1]&&n.push(r[e+1][i+1])),n},e.prototype.toString=function(){for(var t=[],n=this.grid,e=0;e<n.length;e++){for(var i=[],r=n[e],o=0;o<r.length;o++)i.push(r[o].weight);t.push(i.join(" "))}return t.join("\n")},i.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},i.prototype.getCost=function(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight},i.prototype.isWall=function(){return 0===this.weight},r.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove:function(t){var n=this.content.indexOf(t),e=this.content.pop();n!==this.content.length-1&&(this.content[n]=e,this.scoreFunction(e)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var n=this.content[t];t>0;){var e=(t+1>>1)-1,i=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[e]=n,this.content[t]=i,t=e}},bubbleUp:function(t){for(var n=this.content.length,e=this.content[t],i=this.scoreFunction(e);;){var r,o=t+1<<1,a=o-1,s=null;if(a<n){var u=this.content[a];(r=this.scoreFunction(u))<i&&(s=a)}if(o<n){var h=this.content[o];this.scoreFunction(h)<(null===s?i:r)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=e,t=s}}},{astar:n,Graph:e}})},function(n,e){n.exports=t},function(t,n,e){"use strict";e.r(n);var i=e(1),r=e.n(i),o=e(0),a=e.n(o),s=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var u=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n||0,this.y=e||0}return s(t,[{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"angle",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"distance",value:function(t){var n=t.x-this.x,e=t.y-this.y;return Math.sqrt(n*n+e*e)}},{key:"add",value:function(t){this.x+=t.x,this.y+=t.y}},{key:"subtract",value:function(t){this.x-=t.x,this.y-=t.y}},{key:"clone",value:function(){return new t(this.x,this.y)}}]),t}(),h=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var l=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.polygon=e,this.edges=e.edges,this.neighbors=[],this.portals=[],this.centroid=this.calculateCentroid(),this.boundingRadius=this.calculateRadius(),this.weight=1}return h(t,[{key:"getPoints",value:function(){return this.polygon.points}},{key:"contains",value:function(t){return this.polygon.contains(t.x,t.y)||this.isPointOnEdge(t)}},{key:"calculateCentroid",value:function(){var t=new u(0,0),n=this.polygon.points.length;return this.polygon.points.forEach(function(n){return t.add(n)}),t.x/=n,t.y/=n,t}},{key:"calculateRadius",value:function(){var t=0,n=!0,e=!1,i=void 0;try{for(var r,o=this.polygon.points[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var a=r.value,s=this.centroid.distance(a);s>t&&(t=s)}}catch(t){e=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(e)throw i}}return t}},{key:"isPointOnEdge",value:function(t){var n=t.x,e=t.y,i=!0,r=!1,o=void 0;try{for(var a,s=this.edges[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){if(a.value.pointOnSegment(n,e))return!0}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return!1}},{key:"destroy",value:function(){this.neighbors=[],this.portals=[]}},{key:"toString",value:function(){return"NavPoly(id: "+this.id+" at: "+this.centroid+")"}},{key:"isWall",value:function(){return 0===this.weight}},{key:"centroidDistance",value:function(t){return this.centroid.distance(t.centroid)}},{key:"getCost",value:function(t){return this.centroidDistance(t)}}]),t}(),c=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var f=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=n,this.init()}return c(t,[{key:"neighbors",value:function(t){return t.neighbors}},{key:"navHeuristic",value:function(t,n){return t.centroidDistance(n)}},{key:"destroy",value:function(){this.cleanDirty(),this.nodes=[]}}]),t}();f.prototype.init=a.a.Graph.prototype.init,f.prototype.cleanDirty=a.a.Graph.prototype.cleanDirty,f.prototype.markDirty=a.a.Graph.prototype.markDirty;var y=f;function v(t,n,e){var i=n.x-t.x,r=n.y-t.y;return(e.x-t.x)*r-i*(e.y-t.y)}function p(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(t-n)<=e}function d(t,n){var e=t-n,i=e+Math.PI,r=2*Math.PI;return e=i-Math.floor(i/r)*r,e-=Math.PI}function g(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4,i=v(t.start,t.end,n.start),r=v(t.start,t.end,n.end);return!(!p(i,0,e)||!p(r,0,e))}var b=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var x=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.portals=[]}return b(t,[{key:"push",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&(n=t),this.portals.push({left:t,right:n})}},{key:"stringPull",value:function(){var t,n,e,i=this.portals,r=[],o=0,a=0,s=0;t=i[0].left,n=i[0].left,e=i[0].right,r.push(t);for(var u=1;u<i.length;u++){var h=i[u].left,l=i[u].right;if(v(t,e,l)<=0){if(!(t.equals(e)||v(t,n,l)>0)){r.push(n),n=t=n,e=t,a=o=a,s=o,u=o;continue}e=l,s=u}if(v(t,n,h)>=0){if(!(t.equals(n)||v(t,e,h)<0)){r.push(e),n=t=e,e=t,a=o=s,s=o,u=o;continue}n=h,a=u}}return 0!==r.length&&r[r.length-1].equals(i[i.length-1].left)||r.push(i[i.length-1].left),this.path=r,r}}]),t}(),m=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var w=function(){function t(n,e,i,r){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=new u(n,e),this.end=new u(i,r),this.left=Math.min(n,i),this.right=Math.max(n,i),this.top=Math.min(e,r),this.bottom=Math.max(e,r)}return m(t,[{key:"pointOnSegment",value:function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom&&this.pointOnLine(t,n)}},{key:"pointOnLine",value:function(t,n){return(t-this.left)*(this.bottom-this.top)==(this.right-this.left)*(n-this.top)}}]),t}(),k=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var P=function(){function t(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.points=n,this.edges=[];for(var i=1;i<n.length;i++){var r=n[i-1],o=n[i];this.edges.push(new w(r.x,r.y,o.x,o.y))}if(e){var a=n[0],s=n[n.length-1];this.edges.push(new w(a.x,a.y,s.x,s.y))}}return k(t,[{key:"contains",value:function(t,n){for(var e=!1,i=-1,r=this.points.length-1;++i<this.points.length;r=i){var o=this.points[i].x,a=this.points[i].y,s=this.points[r].x,u=this.points[r].y;(a<=n&&n<u||u<=n&&n<a)&&t<(s-o)*(n-a)/(u-a)+o&&(e=!e)}return e}}]),t}(),_=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(e.push(a.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var S=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._meshShrinkAmount=e;var i=n.map(function(t){var n=t.map(function(t){return new u(t.x,t.y)});return new P(n)});this._navPolygons=i.map(function(t,n){return new l(n,t)}),this._calculateNeighbors(),this._graph=new y(this._navPolygons)}return M(t,[{key:"getPolygons",value:function(){return this._navPolygons}},{key:"destroy",value:function(){this._graph.destroy();var t=!0,n=!1,e=void 0;try{for(var i,r=this._navPolygons[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.destroy()}}catch(t){n=!0,e=t}finally{try{!t&&r.return&&r.return()}finally{if(n)throw e}}this._navPolygons=[]}},{key:"findPath",value:function(t,n){var e=null,i=null,r=Number.MAX_VALUE,o=Number.MAX_VALUE,s=void 0,h=void 0,l=new u(t.x,t.y),c=new u(n.x,n.y),f=!0,y=!1,v=void 0;try{for(var p,d=this._navPolygons[Symbol.iterator]();!(f=(p=d.next()).done);f=!0){var g=p.value;h=g.boundingRadius,(s=g.centroid.distance(l))<=r&&s<=h&&g.contains(l)&&(e=g,r=s),(s=g.centroid.distance(c))<=o&&s<=h&&g.contains(c)&&(i=g,o=s)}}catch(t){y=!0,v=t}finally{try{!f&&d.return&&d.return()}finally{if(y)throw v}}if(!e&&this._meshShrinkAmount>0){var b=!0,m=!1,w=void 0;try{for(var k,P=this._navPolygons[Symbol.iterator]();!(b=(k=P.next()).done);b=!0){var _=k.value;if(h=_.boundingRadius+this._meshShrinkAmount,(s=_.centroid.distance(l))<=h){var M=this._projectPointToPolygon(l,_).distance;M<=this._meshShrinkAmount&&M<r&&(e=_,r=M)}}}catch(t){m=!0,w=t}finally{try{!b&&P.return&&P.return()}finally{if(m)throw w}}}if(!i&&this._meshShrinkAmount>0){var S=!0,G=!1,j=void 0;try{for(var O,N=this._navPolygons[Symbol.iterator]();!(S=(O=N.next()).done);S=!0){var E=O.value;if(h=E.boundingRadius+this._meshShrinkAmount,(s=E.centroid.distance(c))<=h){var D=this._projectPointToPolygon(c,E).distance;D<=this._meshShrinkAmount&&D<o&&(i=E,o=D)}}}catch(t){G=!0,j=t}finally{try{!S&&N.return&&N.return()}finally{if(G)throw j}}}if(!e||!i)return null;if(e===i)return[l,c];var C=a.a.astar.search(this._graph,e,i,{heuristic:this._graph.navHeuristic});if(0===C.length)return null;C.unshift(e);var T=new x;T.push(l);for(var A=0;A<C.length-1;A++){for(var q=C[A],R=C[A+1],F=null,U=0;U<q.neighbors.length;U++)q.neighbors[U].id===R.id&&(F=q.portals[U]);T.push(F.start,F.end)}T.push(c),T.stringPull();var L=null,B=[],I=!0,V=!1,W=void 0;try{for(var X,z=T.path[Symbol.iterator]();!(I=(X=z.next()).done);I=!0){var H=X.value.clone();L&&H.equals(L)||B.push(H),L=H}}catch(t){V=!0,W=t}finally{try{!I&&z.return&&z.return()}finally{if(V)throw W}}return B}},{key:"_calculateNeighbors",value:function(){for(var t=0;t<this._navPolygons.length;t++)for(var n=this._navPolygons[t],e=t+1;e<this._navPolygons.length;e++){var i=this._navPolygons[e];if(!(n.centroid.distance(i.centroid)>n.boundingRadius+i.boundingRadius)){var r=!0,o=!1,a=void 0;try{for(var s,u=n.edges[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var h=s.value,l=!0,c=!1,f=void 0;try{for(var y,v=i.edges[Symbol.iterator]();!(l=(y=v.next()).done);l=!0){var p=y.value;if(g(h,p)){var b=this._getSegmentOverlap(h,p);if(b){n.neighbors.push(i),i.neighbors.push(n);var x=_(b,2),m=x[0],k=x[1],P=n.centroid.angle(h.start),M=n.centroid.angle(b[0]),S=n.centroid.angle(b[1]),G=d(P,M),j=d(P,S);G<j?n.portals.push(new w(m.x,m.y,k.x,k.y)):n.portals.push(new w(k.x,k.y,m.x,m.y)),P=i.centroid.angle(p.start),M=i.centroid.angle(b[0]),S=i.centroid.angle(b[1]),(G=d(P,M))<(j=d(P,S))?i.portals.push(new w(m.x,m.y,k.x,k.y)):i.portals.push(new w(k.x,k.y,m.x,m.y))}}}}catch(t){c=!0,f=t}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}}}},{key:"_getSegmentOverlap",value:function(t,n){var e=[{line:t,point:t.start},{line:t,point:t.end},{line:n,point:n.start},{line:n,point:n.end}];e.sort(function(t,n){return t.point.x<n.point.x?-1:t.point.x>n.point.x?1:t.point.y<n.point.y?-1:t.point.y>n.point.y?1:0});var i=e[0].line===e[1].line,r=e[1].point.equals(e[2].point);return i||r?null:[e[1].point,e[2].point]}},{key:"_projectPointToPolygon",value:function(t,n){var e=null,i=Number.MAX_VALUE,r=!0,o=!1,a=void 0;try{for(var s,u=n.edges[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var h=s.value,l=this._projectPointToEdge(t,h),c=t.distance(l);(null===e||c<i)&&(i=c,e=l)}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return{point:e,distance:i}}},{key:"_distanceSquared",value:function(t,n){var e=n.x-t.x,i=n.y-t.y;return e*e+i*i}},{key:"_projectPointToEdge",value:function(t,n){var e=n.start,i=n.end,r=this._distanceSquared(e,i),o=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return o=function(t,n,e){return t<n&&(t=n),t>e&&(t=e),t}(o,0,1),new u(e.x+o*(i.x-e.x),e.y+o*(i.y-e.y))}}]),t}(),G=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var j=function(){function t(n,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e,this.plugin=n,this.scene=n.scene,this.debugGraphics=null,this.navMesh=new S(i,r)}return G(t,[{key:"findPath",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.Geom.Point,i=this.navMesh.findPath(t,n);return i?i.map(function(t){var n=t.x,i=t.y;return new e(n,i)}):i}},{key:"enableDebug",value:function(t){return t||this.debugGraphics?t&&(this.debugGraphics&&this.debugGraphics.destroy(),this.debugGraphics=t):this.debugGraphics=this.scene.add.graphics(),this.debugGraphics.visible=!0,this.debugGraphics}},{key:"disableDebug",value:function(){this.debugGraphics&&(this.debugGraphics.visible=!1)}},{key:"isDebugEnabled",value:function(){return this.debugGraphics&&this.debugGraphics.visible}},{key:"debugDrawClear",value:function(){this.debugGraphics&&this.debugGraphics.clear()}},{key:"debugDrawMesh",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.drawCentroid,i=void 0===e||e,r=n.drawBounds,o=void 0!==r&&r,a=n.drawNeighbors,s=void 0===a||a,u=n.drawPortals,h=void 0===u||u,l=n.palette,c=void 0===l?[41136,6965820,13382463,15427649,15583569]:l;this.debugGraphics&&this.navMesh.getPolygons().forEach(function(n){var e=c[n.id%c.length];t.debugGraphics.fillStyle(e),t.debugGraphics.fillPoints(n.getPoints(),!0),i&&(t.debugGraphics.fillStyle(0),t.debugGraphics.fillCircle(n.centroid.x,n.centroid.y,4)),o&&(t.debugGraphics.lineStyle(1,16777215),t.debugGraphics.strokeCircle(n.centroid.x,n.centroid.y,n.boundingRadius)),s&&(t.debugGraphics.lineStyle(2,0),n.neighbors.forEach(function(e){t.debugGraphics.lineBetween(n.centroid.x,n.centroid.y,e.centroid.x,e.centroid.y)})),h&&(t.debugGraphics.lineStyle(10,0),n.portals.forEach(function(n){return t.debugGraphics.lineBetween(n.start.x,n.start.y,n.end.x,n.end.y)}))})}},{key:"debugDrawPath",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65280,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(this.debugGraphics&&t&&t.length){this.debugGraphics.lineStyle(e,n,i),this.debugGraphics.strokePoints(t),this.debugGraphics.fillStyle(n,i);var r=1.2*e;if(this.debugGraphics.fillCircle(t[0].x,t[0].y,r,r),t.length>1){var o=t[t.length-1];this.debugGraphics.fillCircle(o.x,o.y,r,r)}}}},{key:"destroy",value:function(){this.navMesh&&this.navMesh.destroy(),this.debugGraphics&&this.debugGraphics.destroy(),this.plugin.removeMesh(this.key),this.navMesh=void 0,this.debugGraphics=void 0,this.plugin=void 0,this.scene=void 0}}]),t}(),O=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var N=function(t){function n(t,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i.phaserNavMeshes={},i.scene=t,i.systems=t.sys,t.sys.settings.isBooted||i.systems.events.once("boot",i.boot,i),i}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(n,r.a.Plugins.ScenePlugin),O(n,[{key:"boot",value:function(){this.systems.events.once("destroy",this.destroy,this)}},{key:"init",value:function(){}},{key:"start",value:function(){}},{key:"destroy",value:function(){this.systems.events.off("boot",this.boot,this);var t=Object.values(this.phaserNavMeshes);this.phaserNavMeshes=[],t.forEach(function(t){return t.destroy()}),this.scene=void 0,this.systems=void 0}},{key:"removeMesh",value:function(t){this.phaserNavMeshes[t]&&(this.phaserNavMeshes[t].destroy(),this.phaserNavMeshes[t]=void 0)}},{key:"buildMeshFromTiled",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.phaserNavMeshes[t])return console.warn("NavMeshPlugin: a navmesh already exists with the given key: "+t),this.phaserNavMeshes[t];n&&0!==n.length||console.warn("NavMeshPlugin: The given tilemap object layer is empty or undefined: "+n);var i=(n?n.objects:[]).map(function(t){var n=t.y,e=t.y+t.height,i=t.x,r=t.x+t.width;return[{x:i,y:n},{x:i,y:e},{x:r,y:e},{x:r,y:n}]}),r=new j(this,t,i,e);return this.phaserNavMeshes[t]=r,r}}]),n}();e.d(n,"PhaserNavMesh",function(){return j});n.default=N}]).default});
//# sourceMappingURL=phaser-navmesh.min.js.map